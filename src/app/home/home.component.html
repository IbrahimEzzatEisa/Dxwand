<section class="section section-lg">
  <div class="container-fluid text-center">
    <div class="home">
      <div class="row ">
        <div class="col-md-6">

          <img src="../../assets/img/home.jpg">
          <p class="title-proj"> Form Builder ... Dxwand Task</p>
          <!---------------  button open popup  modal ---------------------->
          <button 
            class="btn btn-outline-light btn-lg  "
            data-toggle="modal"
            data-target="#exampleModal"> Form Builder </button>

        </div>

        <div class="col-md-4">
          <form class="ftheme">
            <!------------------------------ Form Builder ----------------------------------------->
            <p class="form-title">Form Builder </p>
            <div *ngIf="!success"
              class="col-12">
              <div *ngFor="let item of model.attributes"
                class="form-group">
                <!------------------------------------  input prop -------------------------------->
                <div *ngIf="item.type=='text'">
                  <label>{{item.label}}</label> <label *ngIf="item.required"
                    class="text-danger">*</label>
                  <input type="text"
                    class="form-control"
                    id="{{item.name}}"
                    placeholder="{{item.placeholder}}"
                    [(ngModel)]="item.value"
                    [required]="item.required"
                    [ngModelOptions]="{standalone: true}"
                    autocomplete="off">
                </div>
                <div *ngIf="item.type=='email'">
                  <label>{{item.label}}</label> <label *ngIf="item.required"
                    class="text-danger">*</label>
                  <input type="email"
                    class="form-control"
                    id="{{item.name}}"
                    placeholder="{{item.placeholder}}"
                    [(ngModel)]="item.value"
                    [ngModelOptions]="{standalone: true}"
                    autocomplete="off">
                </div>
                <div *ngIf="item.type=='phone'">
                  <label>{{item.label}}</label> <label *ngIf="item.required"
                    class="text-danger">*</label>
                  <input type="email"
                    class="form-control"
                    id="{{item.name}}"
                    placeholder="{{item.placeholder}}"
                    [(ngModel)]="item.value"
                    [ngModelOptions]="{standalone: true}"
                    autocomplete="off">
                </div>
                <div *ngIf="item.type=='number'">
                  <label>{{item.label}}</label> <label *ngIf="item.required"
                    class="text-danger">*</label>
                  <input type="number"
                    class="form-control"
                    id="{{item.name}}"
                    min="{{item.min}}"
                    max="{{item.max}}"
                    placeholder="{{item.placeholder}}"
                    [(ngModel)]="item.value"
                    [ngModelOptions]="{standalone: true}"
                    autocomplete="off">
                </div>
                <div *ngIf="item.type=='date'">
                  <label>{{item.label}}</label> <label *ngIf="item.required"
                    class="text-danger">*</label>
                  <input type="date"
                    class="form-control"
                    id="{{item.name}}"
                    placeholder="{{item.placeholder}}"
                    [(ngModel)]="item.value"
                    [ngModelOptions]="{standalone: true}"
                    autocomplete="off">
                </div>
                <div *ngIf="item.type=='datetime-local'">
                  <label>{{item.label}}</label> <label *ngIf="item.required"
                    class="text-danger">*</label>
                  <input type="datetime-local"
                    class="form-control"
                    id="{{item.name}}"
                    placeholder="{{item.placeholder}}"
                    [(ngModel)]="item.value"
                    [ngModelOptions]="{standalone: true}"
                    autocomplete="off">
                </div>
                <div *ngIf="item.type=='textarea'">
                  <label>{{item.label}}</label> <label *ngIf="item.required"
                    class="text-danger">*</label>
                  <textarea class="form-control"
                    id="{{item.name}}"
                    placeholder="{{item.placeholder}}"
                    [(ngModel)]="item.value"
                    [ngModelOptions]="{standalone: true}"
                    autocomplete="off">
                </textarea>
                </div>
                <div *ngIf="item.type=='file'">
                  <label>{{item.label}} (File can't be uploaded right now)</label> <label *ngIf="item.required"
                    class="text-danger">*</label>
                  <input type="file"
                    class="form-control"
                    id="{{item.name}}"
                    placeholder="{{item.placeholder}}"
                    [(ngModel)]="item.value"
                    [ngModelOptions]="{standalone: true}"
                    autocomplete="off">
                  <small class="form-text text-danger">(File can't be uploaded right now)</small>
                </div>
                <div *ngIf="item.type=='paragraph'">
                  <p class="form-text">{{item.placeholder}}</p>
                </div>
                <div *ngIf="item.type=='autocomplete'">
                  <label>{{item.label}}</label> <label *ngIf="item.required"
                    class="text-danger">*</label>
                  <select class="form-control"
                    id="{{item.name}}"
                    [(ngModel)]="item.value"
                    [ngModelOptions]="{standalone: true}">
                    <option *ngFor="let v of item.values"
                      [value]="v.value">{{v.label}}</option>
                  </select>
                  <!-- <small class="form-text text-muted">{{item.description}}</small> -->
                </div>
                <div *ngIf="item.type=='checkbox'">
                  <label>{{item.label}}</label> <label *ngIf="item.required"
                    class="text-danger">*</label>
                  <div *ngFor="let v of item.values"
                    class="inline-form-group">
                    <label class="cust-check-bx">
                      <input type="checkbox"
                        [value]="v.value"
                        name="{{item.name}}"
                        (click)="toggleValue(v)"> {{v.label}}
                      <span class="checkmark"></span>
                    </label>
                  </div>
                </div>
                <div *ngIf="item.type=='radio'">
                  <label>{{item.label}}</label> <label *ngIf="item.required"
                    class="text-danger">*</label>
                  <div *ngFor="let v of item.values"
                    class="inline-form-group">
                    <label class="cust-check-bx">
                      <input type="radio"
                        [value]="v.value"
                        name="{{item.name}}"
                        [(ngModel)]="item.value"
                        [ngModelOptions]="{standalone: true}"> {{v.label}}
                      <span class="checkmark"></span>
                    </label>
                  </div>
                </div>
                <div *ngIf="item.type=='button'"
                  class="btn-cont">
                  <input type="{{item.subtype}}"
                    (click)="submit()"
                    value="{{item.label}}"
                    class="btn btn-primary"
                    id="{{item.name}}">
                </div>
              </div>


            </div>
          </form>
        </div>
      </div>
    </div>

  </div>
</section>







<!------------------- Modal -------------------------->
<div class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title "
          id="exampleModalLabel">Form Builder </h5>

      </div>
      <div class="modal-body">
        <div class="row">

          <div class="col-8 ">

            <!--a dropzone-->
            <!--to allow dropping content that is not [dndDraggable] set dndAllowExternal to true-->
            <section dndDropzone
              (dndDrop)="onDrop($event,model.attributes)"
              class="dndDropArea"
              [ngClass]="{'empty':model.attributes.length == 0}"
              [style.backgroundColor]="model.theme.bgColor"
              [style.color]="model.theme.textColor">

              <div class="field"
                *ngFor="let item of model.attributes;let i= index;"
                (dndStart)="onDragStart()"
                (dndCanceled)="onDragCanceled()"
                (dndMoved)="onDragged(item, model.attributes, 'move')"
                [dndEffectAllowed]="'all'"
                [dndDraggable]="item">
                <div class="row form-group">
                  <div class="col-1"></div>
                  <div class="col-7 ">

                    <div *ngIf="item.type=='text'">
                      <label>{{item.label}}</label> <label *ngIf="item.required"
                        class="text-danger">*</label>
                      <input type="text"
                        class="form-control"
                        id="{{item.name}}"
                        placeholder="{{item.placeholder}}">
                    </div>
                    <div *ngIf="item.type=='email'">
                      <label>{{item.label}}</label> <label *ngIf="item.required"
                        class="text-danger">*</label>
                      <input type="email"
                        class="form-control"
                        id="{{item.name}}"
                        placeholder="{{item.placeholder}}">
                    </div>
                    <div *ngIf="item.type=='phone'">
                      <label>{{item.label}}</label> <label *ngIf="item.required"
                        class="text-danger">*</label>
                      <input type="text"
                        class="form-control"
                        id="{{item.name}}"
                        placeholder="{{item.placeholder}}">
                    </div>
                    <div *ngIf="item.type=='number'">
                      <label>{{item.label}}</label> <label *ngIf="item.required"
                        class="text-danger">*</label>
                      <input type="number"
                        class="form-control"
                        id="{{item.name}}"
                        min="{{item.min}}"
                        max="{{item.max}}"
                        placeholder="{{item.placeholder}}">
                    </div>
                    <div *ngIf="item.type=='date'">
                      <label>{{item.label}}</label> <label *ngIf="item.required"
                        class="text-danger">*</label>
                      <input type="date"
                        class="form-control"
                        id="{{item.name}}"
                        placeholder="{{item.placeholder}}">
                    </div>
                    <div *ngIf="item.type=='datetime-local'">
                      <label>{{item.label}}</label> <label *ngIf="item.required"
                        class="text-danger">*</label>
                      <input type="datetime-local"
                        class="form-control"
                        id="{{item.name}}"
                        placeholder="{{item.placeholder}}">
                    </div>
                    <div *ngIf="item.type=='textarea'">
                      <label>{{item.label}}</label> <label *ngIf="item.required"
                        class="text-danger">*</label>
                      <textarea class="form-control"
                        id="{{item.name}}"
                        placeholder="{{item.placeholder}}">
                            </textarea>
                    </div>
                    <div *ngIf="item.type=='file'">
                      <label>{{item.label}} (File can't be uploaded right now)</label> <label *ngIf="item.required"
                        class="text-danger">*</label>
                      <input type="file"
                        class="form-control"
                        id="{{item.name}}"
                        placeholder="{{item.placeholder}}">
                      <small class="form-text text-danger">(File can't be uploaded right now)</small>
                    </div>
                    <div *ngIf="item.type=='paragraph'">
                      <p class="form-text">{{item.placeholder}}</p>
                    </div>
                    <div *ngIf="item.type=='autocomplete'">
                      <label>{{item.label}}</label> <label *ngIf="item.required"
                        class="text-danger">*</label>
                      <select class="form-control"
                        id="{{item.name}}">
                        <option *ngFor="let v of item.values"
                          [value]="v.value">{{v.label}}</option>
                      </select>
                      <!-- <small class="form-text text-muted">{{item.description}}</small> -->
                    </div>
                    <div *ngIf="item.type=='checkbox'">
                      <label>{{item.label}}</label> <label *ngIf="item.required"
                        class="text-danger">*</label>
                      <div *ngFor="let v of item.values"
                        class="inline-form-group">
                        <label class="cust-check-bx">
                          <input type="checkbox"
                            [value]="v.value"
                            name="{{item.name}}"
                            (click)="toggleValue(v)"> {{v.label}}
                          <span class="checkmark"></span>
                        </label>
                      </div>
                    </div>
                    <div *ngIf="item.type=='radio'">
                      <label>{{item.label}}</label> <label *ngIf="item.required"
                        class="text-danger">*</label>
                      <div *ngFor="let v of item.values"
                        class="inline-form-group">
                        <label class="cust-check-bx">
                          <input type="radio"
                            [value]="v.value"
                            name="{{item.name}}"> {{v.label}}
                          <span class="checkmark"></span>
                        </label>
                      </div>
                    </div>
                    <div *ngIf="item.type=='button'"
                      class="btn-cont">
                      <input type="{{item.subtype}}"
                        (click)="submit()"
                        value="{{item.label}}"
                        class="btn btn-primary"
                        id="{{item.name}}">
                    </div>
                  </div>
                  <div class="col-4">
                    <i *ngIf="item.toggle"
                      (click)="item.toggle=false"
                      class="fa fa-chevron-up pull-right"></i>
                    <i *ngIf="!item.toggle"
                      (click)="item.toggle=true"
                      class="far fa-edit pull-right"></i>
                    <i (click)="removeField(i)"
                      class="fa fa-trash pull-right"></i>
                  </div>
                </div>
                <div *ngIf="item.toggle"
                  class="toggle-Wrapper">
                  <div class="form-group">
                    <label>Required</label>
                    <i *ngIf="item.required"
                      (click)="item.required=false"
                      class="fa fa-toggle-on red"></i>
                    <i *ngIf="!item.required"
                      (click)="item.required=true"
                      class="fa fa-toggle-off"></i>
                    <span class="pull-right ucfirst">{{item.type}}</span>
                  </div>
                  <div class="form-group">
                    <label>Label</label>
                    <input class="form-control"
                      type="text"
                      [(ngModel)]="item.label" />
                  </div>
                  <div class="form-group">
                    <label>Name</label>
                    <input class="form-control"
                      type="text"
                      [(ngModel)]="item.name" />
                  </div>
                  <div class="form-group">
                    <label>Placeholder</label>
                    <input class="form-control"
                      type="text"
                      [(ngModel)]="item.placeholder" />
                  </div>
                  <div class="form-group">
                    <label>Regex</label>
                    <input class="form-control"
                      type="text"
                      [(ngModel)]="item.regex" />
                  </div>
                  <div *ngIf="item.regex"
                    class="form-group">
                    <label>Error text</label>
                    <input class="form-control"
                      type="text"
                      [(ngModel)]="item.errorText" />
                  </div>

                  <!-- number -->
                  <div *ngIf="item.type=='number'"
                    class="row">
                    <div class="col-6">
                      <div class="form-group">
                        <label>Min</label>
                        <input class="form-control"
                          type="text"
                          [(ngModel)]="item.min" />
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="form-group">
                        <label>Max</label>
                        <input class="form-control"
                          type="text"
                          [(ngModel)]="item.max" />
                      </div>
                    </div>
                  </div>

                  <!-- radio || checkbox || autocomplete -->
                  <div *ngIf="item.type=='radio'|| item.type=='checkbox' || item.type=='autocomplete'">
                    <div class="row">
                      <div class="col-5">
                        <div class="form-group">
                          <label>Label</label>
                        </div>
                      </div>
                      <div class="col-5">
                        <div class="form-group">
                          <label>Value</label>
                        </div>
                      </div>
                      <div class="col-2">
                        <div class="form-group">
                          <label>Action</label>
                        </div>
                      </div>
                    </div>
                    <div *ngFor="let i of item.values; let valueIndex=index;"
                      class="row">
                      <div class="col-5">
                        <div class="form-group">
                          <input class="form-control"
                            type="text"
                            [(ngModel)]="i.label" />
                        </div>
                      </div>
                      <div class="col-5">
                        <div class="form-group">
                          <input class="form-control"
                            type="text"
                            [(ngModel)]="i.value" />
                        </div>
                      </div>
                      <div class="col-2">
                        <div class="form-group">
                          <label (click)="item.values.splice(valueIndex,1)">remove</label>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-5">
                        <div class="form-group">
                          <input class="form-control"
                            type="text"
                            [(ngModel)]="value.label" />
                        </div>
                      </div>
                      <div class="col-5">
                        <div class="form-group">
                          <input class="form-control"
                            type="text"
                            [(ngModel)]="value.value" />
                        </div>
                      </div>
                      <div class="col-2">
                        <div class="form-group">
                          <!-- Add value -->
                          <label (click)="addValue(item.values)">Add</label>
                        </div>
                      </div>
                    </div>
                  </div>




                </div>
              </div>
              <!--optional placeholder element for dropzone-->
              <div class="dndPlaceholder"
                dndPlaceholderRef>
              </div>
            </section>

          </div>

          <div class="col-1">
          </div>

          <div class="col-3  element ">
            <!-------------------------a draggable element --------------------->
            <div class="fields"
              *ngFor="let item of fieldModels">
              <div class="field pointer shadow-bg"
                [dndDraggable]="item"
                [dndEffectAllowed]="'copy'"
                (dndEnd)="onDragEnd($event)">

                <h5>
                  <i [ngClass]="item.icon"
                    class="fa pull-right">
                    <span>
                      {{item.label}}
                    </span>
                  </i>
                </h5>





              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <!------------------------button save or close    - --------------->
        <button type="button"
          class="btn btn-primary btn-md btn-block"
          (click)="saveInput()">save</button>
        <button type="button"
          class="btn btn-secondary btn-md btn-block"
          data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>